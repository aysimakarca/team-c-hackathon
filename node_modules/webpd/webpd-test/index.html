<!doctype HTML>

<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="js/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="/deps/AudioContextMonkeyPatch.js"></script>
    <script type="text/javascript" src="/dist/webpd-latest.js"></script>
  </head>

  <body>
    <button id="startButton">Start</button>

    <div id="console"></div>
    <script type="text/javascript">
      /*window.console = {
        log: function() {
          $('<div>', {class: 'message'})
            .html(this._formatArgs(arguments))
            .appendTo('#console')
        },
        error: function() {
          $('<div>', {class: 'error'})
            .html(this._formatArgs(arguments))
            .appendTo('#console')
        },
        warn: function() {
          $('<div>', {class: 'warn'})
            .html(this._formatArgs(arguments))
            .appendTo('#console')
        },

        _formatArgs: function(args) {
          return [].slice.call(args, 0).join(', ')
        }
      }*/
    </script>


    <script type="text/javascript">
      $(function() {
        $('#startButton').click(function() {
          $(this).hide()
          /*var context = new AudioContext
            , osc = context.createOscillator()
          osc.connect(context.destination)
          osc.frequency.value = 550 
          osc.start(0)
          osc.stop(0)*/
          Pd.start()

          $.get('pd/main.pd', function(mainStr) {
            //try {
              patch = Pd.loadPatch(mainStr)

            /*} catch (err) {
              console.error(err)
            }*/
          })
        })
      })
    </script>

  </body>
</html>
